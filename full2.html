<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Algoritmo de Kadane</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}
:root{
    --vscode-activityBar-activeBorder: #0078d4;
    --vscode-activityBar-background: #181818;
    --vscode-activityBar-border: #ffffff15;
    --vscode-activityBar-foreground: #d7d7d7;
    --vscode-activityBar-inactiveForeground: #ffffff80;
    --vscode-activityBarBadge-background: #0078d4;
    --vscode-activityBarBadge-foreground: #ffffff;
    --vscode-badge-background: #0078d4;
    --vscode-badge-foreground: #ffffff;
    --vscode-button-background: #0078d4;
    --vscode-button-border: #ffffff12;
    --vscode-button-foreground: #ffffff;
    --vscode-button-hoverBackground: #0078d4e6;
    --vscode-button-secondaryBackground: #ffffff0f;
    --vscode-button-secondaryForeground: #cccccc;
    --vscode-button-secondaryHoverBackground: #ffffff15;
    --vscode-checkbox-background: #313131;
    --vscode-checkbox-border: #ffffff1f;
    --vscode-debugToolBar-background: #181818;
    --vscode-descriptionForeground: #8b949e;
    --vscode-dropdown-background: #313131;
    --vscode-dropdown-border: #ffffff1f;
    --vscode-dropdown-foreground: #cccccc;
    --vscode-dropdown-listBackground: #1f1f1f;
    --vscode-editor-background: #1f1f1f;
    --vscode-editor-findMatchBackground: #9e6a03;
    --vscode-editor-foreground: #cccccc;
    --vscode-editor-inactiveSelectionBackground: #3a3d41;
    --vscode-editor-selectionHighlightBackground: #add6ff26;
    --vscode-editorGroup-border: #ffffff17;
    --vscode-editorGroupHeader-tabsBackground: #181818;
    --vscode-editorGroupHeader-tabsBorder: #ffffff15;
    --vscode-editorGutter-addedBackground: #2ea043;
    --vscode-editorGutter-deletedBackground: #f85149;
    --vscode-editorGutter-modifiedBackground: #0078d4;
    --vscode-editorIndentGuide-activeBackground: #707070;
    --vscode-editorIndentGuide-background: #404040;
    --vscode-editorInlayHint-background: #8b949e1b;
    --vscode-editorInlayHint-typeBackground: #8b949e1b;
    --vscode-editorLineNumber-activeForeground: #cccccc;
    --vscode-editorLineNumber-foreground: #6e7681;
    --vscode-editorOverviewRuler-border: #010409;
    --vscode-editorWidget-background: #1f1f1f;
    --vscode-errorForeground: #f85149;
    --vscode-focusBorder: #0078d4;
    --vscode-foreground: #cccccc;
    --vscode-icon-foreground: #cccccc;
    --vscode-input-background: #2a2a2a;
    --vscode-input-border: #ffffff1f;
    --vscode-input-foreground: #cccccc;
    --vscode-input-placeholderForeground: #ffffff79;
    --vscode-inputOption-activeBackground: #2489db82;
    --vscode-inputOption-activeBorder: #2488db;
    --vscode-keybindingLabel-foreground: #cccccc;
    --vscode-list-activeSelectionBackground: #323232;
    --vscode-list-activeSelectionForeground: #ffffff;
    --vscode-list-activeSelectionIconForeground: #ffffff;
    --vscode-list-dropBackground: #383b3d;
    --vscode-menu-background: #1f1f1f;
    --vscode-menu-border: #454545;
    --vscode-menu-foreground: #cccccc;
    --vscode-menu-separatorBackground: #454545;
    --vscode-notificationCenterHeader-background: #1f1f1f;
    --vscode-notificationCenterHeader-foreground: #cccccc;
    --vscode-notifications-background: #1f1f1f;
    --vscode-notifications-border: #ffffff15;
    --vscode-notifications-foreground: #cccccc;
    --vscode-panel-background: #181818;
    --vscode-panel-border: #ffffff15;
    --vscode-panelInput-border: #ffffff15;
    --vscode-panelTitle-activeBorder: #0078d4;
    --vscode-panelTitle-activeForeground: #cccccc;
    --vscode-panelTitle-inactiveForeground: #8b949e;
    --vscode-peekViewEditor-background: #1f1f1f;
    --vscode-peekViewEditor-matchHighlightBackground: #bb800966;
    --vscode-peekViewResult-background: #1f1f1f;
    --vscode-peekViewResult-matchHighlightBackground: #bb800966;
    --vscode-pickerGroup-border: #ffffff15;
    --vscode-pickerGroup-foreground: #8b949e;
    --vscode-ports-iconRunningProcessForeground: #369432;
    --vscode-progressBar-background: #0078d4;
    --vscode-quickInput-background: #1f1f1f;
    --vscode-quickInput-foreground: #cccccc;
    --vscode-scrollbar-shadow: #484f5833;
    --vscode-scrollbarSlider-activeBackground: #6e768187;
    --vscode-scrollbarSlider-background: #6e768133;
    --vscode-scrollbarSlider-hoverBackground: #6e768145;
    --vscode-settings-dropdownBackground: #313131;
    --vscode-settings-dropdownBorder: #ffffff1f;
    --vscode-settings-headerForeground: #ffffff;
    --vscode-settings-modifiedItemIndicator: #bb800966;
    --vscode-sideBar-background: #181818;
    --vscode-sideBar-border: #ffffff15;
    --vscode-sideBar-foreground: #cccccc;
    --vscode-sideBarSectionHeader-background: #181818;
    --vscode-sideBarSectionHeader-border: #ffffff15;
    --vscode-sideBarSectionHeader-foreground: #cccccc;
    --vscode-sideBarTitle-foreground: #cccccc;
    --vscode-statusBar-background: #181818;
    --vscode-statusBar-border: #ffffff15;
    --vscode-statusBar-debuggingBackground: #0078d4;
    --vscode-statusBar-debuggingForeground: #ffffff;
    --vscode-statusBar-focusBorder: #0078d4;
    --vscode-statusBar-foreground: #cccccc;
    --vscode-statusBar-noFolderBackground: #1f1f1f;
    --vscode-statusBarItem-focusBorder: #0078d4;
    --vscode-statusBarItem-prominentBackground: #6e768166;
    --vscode-statusBarItem-remoteBackground: #0078d4;
    --vscode-statusBarItem-remoteForeground: #ffffff;
    --vscode-tab-activeBackground: #1f1f1f;
    --vscode-tab-activeBorder: #1f1f1f;
    --vscode-tab-activeBorderTop: #0078d4;
    --vscode-tab-activeForeground: #ffffff;
    --vscode-tab-border: #ffffff15;
    --vscode-tab-hoverBackground: #1f1f1f;
    --vscode-tab-inactiveBackground: #181818;
    --vscode-tab-inactiveForeground: #ffffff80;
    --vscode-tab-lastPinnedBorder: #cccccc33;
    --vscode-tab-unfocusedActiveBorder: #1f1f1f;
    --vscode-tab-unfocusedActiveBorderTop: #ffffff15;
    --vscode-tab-unfocusedHoverBackground: #6e76811a;
    --vscode-terminal-foreground: #cccccc;
    --vscode-terminal-inactiveSelectionBackground: #3a3d41;
    --vscode-terminal-tab-activeBorder: #0078d4;
    --vscode-textBlockQuote-background: #010409;
    --vscode-textBlockQuote-border: #ffffff14;
    --vscode-textCodeBlock-background: #7e869166;
    --vscode-textLink-activeForeground: #40a6ff;
    --vscode-textLink-foreground: #40a6ff;
    --vscode-textSeparator-foreground: #21262d;
    --vscode-titleBar-activeBackground: #181818;
    --vscode-titleBar-activeForeground: #cccccc;
    --vscode-titleBar-border: #ffffff15;
    --vscode-titleBar-inactiveBackground: #1f1f1f;
    --vscode-titleBar-inactiveForeground: #8b949e;
    --vscode-welcomePage-progress-foreground: #0078d4;
    --vscode-welcomePage-tileBackground: #ffffff0f;
    --vscode-widget-border: #ffffff15;
}
pre code{
    color: #010409 !important;
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="algoritmo-de-kadane">Algoritmo de Kadane</h1>
<p>Nesse algoritmo O(n), retornará o valor da maior soma de um subarray contíguo que está contido no array original.</p>
<p>Ou seja: <code>subarray_sum([1,-2,3,-1,4]) -&gt; 6</code> pois a maior soma está em [3, -1, 4].</p>
<p>Este algoritmo utiliza técnicas de programação dinâmica para resolução do problema.</p>
<h2 id="python">Python</h2>
<pre><code class="language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">subarray_sum</span>(<span class="hljs-params">arr</span>):
    <span class="hljs-comment"># valores iniciais</span>
    max_ = arr[<span class="hljs-number">0</span>]
    max_end = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)):
        max_end = max_end + arr[i]
        <span class="hljs-keyword">if</span> max_end &lt; <span class="hljs-number">0</span>: <span class="hljs-comment"># resetar contador</span>
            max_end = <span class="hljs-number">0</span>
        
        <span class="hljs-keyword">elif</span> max_ &lt; max_end: <span class="hljs-comment"># atualizar máximo</span>
            max_ = max_end

    <span class="hljs-keyword">return</span> max_
</code></pre>
<h1 id="remover-ciclos">Remover ciclos</h1>
<p>O código abaixo remove ciclos de um grafo direcionado. A forma que ele faz isso é transformar todos os nós pertencentes a um ciclo em um único nó, dessa forma facilita quando se calcula o <em>In-degree</em> e o <em>Out-Degree</em> e não se quer um ciclo.</p>
<p>De uma olhada no seguinte exercício para mais detalhes de onde usar:</p>
<ul>
<li><a href="https://www.beecrowd.com.br/judge/pt/runs/code/35267180">3431 - Habilitando a Movimentação</a></li>
</ul>
<pre><code class="language-python">
n,m = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())

nodes = [<span class="hljs-built_in">set</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):
    r,s = <span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> a:<span class="hljs-built_in">int</span>(a)-<span class="hljs-number">1</span>,<span class="hljs-built_in">input</span>().split())
    nodes[r].add(s)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">recursivaRemoveCiclo</span>(<span class="hljs-params">nodeId,nodes:<span class="hljs-built_in">list</span>[<span class="hljs-built_in">set</span>],nodeStack: <span class="hljs-built_in">set</span>,nodesVisited:<span class="hljs-built_in">list</span></span>):
    <span class="hljs-comment"># check if this node is in cicle</span>
    <span class="hljs-keyword">if</span> nodeId <span class="hljs-keyword">in</span> nodeStack:
        <span class="hljs-keyword">return</span> nodeId
    <span class="hljs-comment"># check if this node already was visited</span>
    <span class="hljs-keyword">if</span> nodesVisited[nodeId]:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

    <span class="hljs-comment"># mark this node in stack and visited</span>
    nodeStack.add(nodeId)
    nodesVisited[nodeId] = <span class="hljs-literal">True</span>

    <span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> nodes[nodeId].copy():
        newNodeId = recursivaRemoveCiclo(child,nodes,nodeStack,nodesVisited)
        <span class="hljs-keyword">if</span> newNodeId != <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">if</span> newNodeId != nodeId:
                nodes[nodeId].remove(child)
                nodes[newNodeId] |= nodes[nodeId]
                <span class="hljs-keyword">if</span> nodeId <span class="hljs-keyword">in</span> nodes[newNodeId]:
                    nodes[newNodeId].remove(nodeId)
                nodes[nodeId] = nodes[newNodeId]
                nodesVisited[nodeId] = <span class="hljs-number">2</span> <span class="hljs-comment"># Mark to destroy this node later</span>
                <span class="hljs-keyword">return</span> newNodeId
            <span class="hljs-keyword">else</span>:
                nodesVisited[nodeId] = <span class="hljs-literal">False</span>
                
            
    <span class="hljs-comment"># remove node of stack</span>
    nodeStack.remove(nodeId)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">removeCiclo</span>(<span class="hljs-params">nodes:<span class="hljs-built_in">list</span>[<span class="hljs-built_in">set</span>]</span>):
    nodesVisited = [<span class="hljs-literal">False</span>] * <span class="hljs-built_in">len</span>(nodes)
    <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nodes)):
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> nodesVisited[node]:
            recursivaRemoveCiclo(node,nodes,<span class="hljs-built_in">set</span>(),nodesVisited)
    
    <span class="hljs-built_in">print</span>(nodes)
    nodes = [nodes[node] <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nodes)) <span class="hljs-keyword">if</span> nodesVisited[node]!=<span class="hljs-number">2</span>]
    <span class="hljs-keyword">return</span> nodes

</code></pre>
<h1 id="problema-da-mochila--knapsack">Problema da mochila / Knapsack</h1>
<pre><code class="language-python">weight, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())
itens  = []

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):
    val,weightItem = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())
    itens.append((val,weightItem))

<span class="hljs-comment">#Compute matrix of max choises</span>
mat = [[<span class="hljs-number">0</span>]*(weight+<span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]
<span class="hljs-keyword">for</span> i, (val,weightItem) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(itens,<span class="hljs-number">1</span>):
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(weight+<span class="hljs-number">1</span>):
        mat[i][x] = <span class="hljs-built_in">max</span>(mat[i-<span class="hljs-number">1</span>][x],(mat[i-<span class="hljs-number">1</span>][x-weightItem] + val) <span class="hljs-keyword">if</span> x &gt;= weightItem <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Maximo peso:&#x27;</span>,mat[-<span class="hljs-number">1</span>][weight])
</code></pre>
<p>Complexidade: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>∗</mo><mi>W</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N*W)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mclose">)</span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">N=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span> Número de itens <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mo>=</mo></mrow><annotation encoding="application/x-tex">W=</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span></span></span></span> Peso máximo carregado</p>
<h1 id="solução-ótima">Solução ótima</h1>
<pre><code class="language-python"><span class="hljs-keyword">import</span> sys
<span class="hljs-comment"># If some recursion error apear, increase this number</span>
sys.setrecursionlimit(<span class="hljs-number">2500</span>)

weight, n = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())
itens  = []

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):
    val,peso = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>,<span class="hljs-built_in">input</span>().split())
    itens.append((val,peso))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack_optimal</span>(<span class="hljs-params">itens,cache,currentWeight,i</span>):
    <span class="hljs-keyword">if</span> i &lt; <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    key = (i,currentWeight)
    <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> cache:
        <span class="hljs-keyword">return</span> cache[key]
    val,weight = itens[i]

    cache[key] = <span class="hljs-built_in">max</span>(
        (knapsack_optimal(itens,cache,currentWeight-weight,i-<span class="hljs-number">1</span>)+val) <span class="hljs-keyword">if</span> currentWeight &gt;= weight <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>,
        knapsack_optimal(itens,cache,currentWeight,i-<span class="hljs-number">1</span>)
    )
    <span class="hljs-keyword">return</span> cache[key]

cache = {}
solve = knapsack_optimal(itens,cache,weight,<span class="hljs-built_in">len</span>(itens)-<span class="hljs-number">1</span>)
</code></pre>
<h2 id="backtrace-da-solução-otima">BackTrace da solução otima</h2>
<pre><code class="language-python">
<span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack_optimal_with_backtrace</span>(<span class="hljs-params">itens,maxWeight</span>):
    currentWeight = maxWeight
    solution = []
    cache = {}
    totalValue = knapsack_optimal(itens,cache,maxWeight,<span class="hljs-built_in">len</span>(itens)-<span class="hljs-number">1</span>)
    currentValue = totalValue
    
    <span class="hljs-comment"># Executa todos menos o item na casa 0</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(itens)-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):
        <span class="hljs-comment"># se o valor do passo anterior for diferente do valor atual, então foi adicionado o item ao valor atual</span>
        <span class="hljs-keyword">if</span> cache[(i-<span class="hljs-number">1</span>,currentWeight)] != cache[(i,currentWeight)]:
            <span class="hljs-comment"># inclui o iten no conjunto solução</span>
            val,weight = itens[i]
            currentWeight -= weight
            currentValue -= val
            solution.append(itens[i])
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># Depois que executou tudo</span>
        <span class="hljs-comment"># Se ainda tem valor sobrando, então inclui o ultimo</span>
        <span class="hljs-keyword">if</span> currentValue &gt; <span class="hljs-number">0</span>:
            solution.append(itens[<span class="hljs-number">0</span>])
    
    <span class="hljs-keyword">return</span> solution,totalValue

</code></pre>
<h1 id="variações-do-problema">Variações do problema</h1>
<h2 id="dois-sacos">Dois sacos</h2>
<pre><code class="language-python"><span class="hljs-comment"># mudança nos parametros</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">encontraSolucao</span>(<span class="hljs-params">itens,pesoDispA,pesoDispB,i</span>)
    <span class="hljs-keyword">if</span> i &gt;= <span class="hljs-built_in">len</span>(itens):
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    valor, peso = itens[i]
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(
        encontraSolucao(itens,pesoDispA,i+<span class="hljs-number">1</span>),
        encontraSolucao(itens,pesoDispA-peso,i+<span class="hljs-number">1</span>)+valor <span class="hljs-keyword">if</span> pesoDispA-peso &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        <span class="hljs-comment"># nova linha</span>
        encontraSolucao(itens,pesoDispA,pesoDispB-peso,i+<span class="hljs-number">1</span>)+valor <span class="hljs-keyword">if</span> pesoDispB-peso &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
    )
</code></pre>
<h1 id="combinatória-em-python">Combinatória em Python</h1>
<p>Se quiser uma lista de todas as combinações de um item em Python utilize a função <code>combinations</code> da biblioteca <code>ìtertools</code>:</p>
<pre><code class="language-python">
<span class="hljs-comment"># onde iterável é qualquer iterável</span>
<span class="hljs-comment"># e quantidade remete a quantos itens cada combinação terá</span>
<span class="hljs-comment"># combinations(iterável, quantidade)</span>

<span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> combinations

itens = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(combinations(itens,<span class="hljs-number">2</span>)))
<span class="hljs-comment"># [(1, 2), (1, 3), (2, 3)]</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(combinations(itens, <span class="hljs-number">3</span>)))
<span class="hljs-comment"># [(1, 2, 3)]</span>
</code></pre>
<p>Caso seja desejado uma combinação com repetição de elementos individuais, temos a <code>combinations_with_replacement</code>:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> combinations_with_replacement

itens = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(combinations_with_replacement(itens, <span class="hljs-number">2</span>)))
<span class="hljs-comment"># [(1, 1), (1, 2), (1, 3), (2, 2), (2, 3), (3, 3)]</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(combinations_with_replacement(itens, <span class="hljs-number">3</span>)))
<span class="hljs-comment"># [(1, 1, 1), (1, 1, 2), (1, 1, 3), (1, 2, 2), (1, 2, 3), (1, 3, 3), (2, 2, 2), (2, 2, 3), (2, 3, 3), (3, 3, 3)]</span>
</code></pre>
<p>Para permutações, utilize <code>permutations</code>:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> permutations

<span class="hljs-comment"># onde iterável é qualquer iterável</span>
<span class="hljs-comment"># e quantidade remete a quantos itens cada permutação terá</span>
<span class="hljs-comment"># permutations(iterável, quantidade)</span>

itens = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(permutations(itens)))
<span class="hljs-comment"># [(1, 2, 3), (1, 3, 2), (2, 1, 3), (2, 3, 1), (3, 1, 2), (3, 2, 1)]</span>


<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(permutations(itens, <span class="hljs-number">2</span>)))
<span class="hljs-comment"># [(1, 2), (1, 3), (2, 1), (2, 3), (3, 1), (3, 2)]</span>
</code></pre>
<p>De forma similar, pode ser feito combinações parecido com produto cartesiano em Python de forma rápida com <code>product</code>:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> product

itens1 = <span class="hljs-string">&#x27;abc&#x27;</span>
itens2 = <span class="hljs-string">&#x27;def&#x27;</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(product(itens1, itens2)))
[(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;f&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;f&#x27;</span>), (<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;d&#x27;</span>), (<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>), (<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;f&#x27;</span>)]

</code></pre>
<p>Caso se queira C<sub>i</sub> sem computar toda a lista pode-se usar o código a seguir:</p>
<pre><code class="language-python"><span class="hljs-comment"># função da biblioteca more_itertools</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">nth_combination</span>(<span class="hljs-params">iterable, r, index</span>):
    <span class="hljs-string">&quot;Equivalent to list(combinations(iterable, r))[index]&quot;</span>
    pool = <span class="hljs-built_in">tuple</span>(iterable)
    n = <span class="hljs-built_in">len</span>(pool)
    c = math.comb(n, r)
    <span class="hljs-keyword">if</span> index &lt; <span class="hljs-number">0</span>:
        index += c
    <span class="hljs-keyword">if</span> index &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> index &gt;= c:
        <span class="hljs-keyword">raise</span> IndexError
    result = []
    <span class="hljs-keyword">while</span> r:
        c, n, r = c*r//n, n-<span class="hljs-number">1</span>, r-<span class="hljs-number">1</span>
        <span class="hljs-keyword">while</span> index &gt;= c:
            index -= c
            c, n = c*(n-r)//n, n-<span class="hljs-number">1</span>
        result.append(pool[-<span class="hljs-number">1</span>-n])
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">tuple</span>(result)

itens = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(combinations(itens, <span class="hljs-number">2</span>)))
<span class="hljs-comment"># [(1, 2), (1, 3), (2, 3)]</span>

<span class="hljs-built_in">print</span>(nth_combination([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-number">2</span>, <span class="hljs-number">1</span>))
<span class="hljs-comment"># (1, 3)</span>

<span class="hljs-comment"># benchmarks com pequeno N:</span>

timeit.timeit(<span class="hljs-keyword">lambda</span>: nth_combination([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
<span class="hljs-comment"># 0.4471917999908328</span>

timeit.timeit(<span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">list</span>(combinations([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>], <span class="hljs-number">2</span>))[<span class="hljs-number">2</span>])
<span class="hljs-comment"># 0.25818079998134635</span>

<span class="hljs-comment"># Note que para pequeno N vale mais a pena utilizar o método padrão</span>

timeit.timeit(<span class="hljs-keyword">lambda</span>: <span class="hljs-built_in">list</span>(combinations(<span class="hljs-built_in">range</span>(<span class="hljs-number">50</span>), <span class="hljs-number">2</span>))[<span class="hljs-number">2</span>])
<span class="hljs-comment"># 24.647441400011303</span>

timeit.timeit(<span class="hljs-keyword">lambda</span>: nth_combination(<span class="hljs-built_in">range</span>(<span class="hljs-number">50</span>), <span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
<span class="hljs-comment"># 0.742395299981581</span>

<span class="hljs-comment"># nos meus testes, com o número total de combinações &gt; 15 já é vantajoso utilizar a função nth_combination</span>
</code></pre>
<h1 id="apenas-quantidades">Apenas quantidades</h1>
<p>Caso queria apenas a quantidade de combinações, invés de utilizar len() pode se utilizar as funções prontas da <code>math</code>:</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> comb, perm

<span class="hljs-comment"># número de maneiras de combinar n itens em k posições </span>
<span class="hljs-comment"># comb(n,k)</span>

<span class="hljs-comment"># equivalente a len(combinations([1,2,3], 2))</span>
<span class="hljs-built_in">print</span>(comb(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>))
<span class="hljs-comment"># 3</span>

<span class="hljs-comment"># equivalente a len(permutations([1,2,3], 2))</span>
<span class="hljs-built_in">print</span>(perm(<span class="hljs-number">3</span>,<span class="hljs-number">2</span>))
<span class="hljs-comment"># 6</span>
</code></pre>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>